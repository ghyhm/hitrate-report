buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
	    classpath 'org.springframework.boot:spring-boot-starter-web:1.5.4.RELEASE'
	    classpath 'org.springframework.boot:spring-boot-starter-data-jpa:1.5.4.RELEASE'
	    classpath 'org.hibernate:hibernate-core:5.2.10.Final'
	    classpath 'commons-dbcp:commons-dbcp:20030825.184428'
	    classpath 'com.github.jsimone:webapp-runner:8.5.15.1'
        classpath 'org.postgresql:postgresql:9.4-1201-jdbc41'
        classpath 'org.flywaydb:flyway-gradle-plugin:4.2.0'
    }
}
apply plugin: 'org.flywaydb.flyway'
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'war'
archivesBaseName = 'hitrate-report'
version = '1' 

task stage() {
    dependsOn clean, war
}
war.mustRunAfter clean

task copyToLib(type: Copy) {
    into "$buildDir/server"
    from(configurations.compile) {
        include "webapp-runner*"
    }
}

stage.dependsOn(copyToLib)

flyway {
    url = 'jdbc:postgresql://localhost:5432/hitratereport'
    user = 'mandyyan'
}